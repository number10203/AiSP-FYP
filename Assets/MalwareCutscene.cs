using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class MalwareCutscene : MonoBehaviour
{
    [SerializeField] private GameObject skipButton;

    private Animator anim;

    [SerializeField] private MalwareManager_1 sceneManager;

    public AudioClip skippedAudio;

    void Start()
    {
        sceneManager = GameObject.FindGameObjectWithTag("GameController").GetComponent<MalwareManager_1>();
        sceneManager.subtitleManager.InitSubtitles("Ethan_Cutscene1_Eng");
        anim = GetComponent<Animator>();
    }

    public void SkipCutscene()
    {
        GetComponent<AudioSource>().Stop();
        anim.Play("UnskippableCutscene");
        sceneManager.subtitleManager.SetTimer(17f);
    }

    public void SetSkippableStatus()
    {
        GetComponent<AudioSource>().Stop();
        GetComponent<AudioSource>().PlayOneShot(skippedAudio);
        skipButton.SetActive(false);
    }

    public void FinishedCutscene()
    {
        sceneManager.InitialSetUp();
        sceneManager.subtitleManager.FinishSubtitle();
        gameObject.SetActive(false);
    }
}
